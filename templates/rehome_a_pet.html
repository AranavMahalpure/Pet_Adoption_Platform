{% extends "index.html" %}
{% block start %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/rehome.css' %}">

{% if messages %}
    <ul id="messages">
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
    <script>
        setTimeout(function() {
            document.getElementById("messages").style.display = "none";
        }, 2000);
    </script>
{% endif %}

{% if user.is_authenticated %}
<form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="name">Name of Pet:</label>
    <input type="text" name="name" id="name" required>
    
    <label for="description">Description of Pet:</label>
    <textarea class="form-control" name="description" id="description" rows="3" required></textarea>
    
    <label for="color">Color of Pet:</label>
    <input type="text" name="color" id="color" required>
    
    <label for="species">Choose a species of Pet:</label>
    <select name="species" id="species" onchange="breedDropdown()" required>
        <option value="">--Select a species--</option>
        <option value="Dog">Dog</option>
        <option value="Cat">Cat</option>
    </select>
    
    <label for="breed">Breed:</label>
    <select name="breed" id="breed" disabled required>
        <option value="">Please select a species</option>
    </select>
    
    <label for="gender">Gender:</label>
    <div class="radio-container">
        <input type="radio" name="gender" id="male" value="male">
        <label for="male">Male</label>
        <input type="radio" name="gender" id="female" value="female">
        <label for="female">Female</label>
    </div>
    

    
    <label for="size">Size:</label>
    <select name="size" id="size" required>
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="large">Large</option>
    </select>
    
    <label for="age">Age:</label>
    <input type="number" name="age" id="age" min="0" required>
    
    <label for="spayed">Spayed:</label>
    <select name="spayed" id="spayed" required>
        <option value="no">No</option>
        <option value="yes">Yes</option>
    </select>
    
    <label for="sellername">Seller Name:</label>
    <input type="text" name="sellername" id="sellername" value="{{ user.username }}" readonly>
    
    <label for="adoptionfee">Adoption Fee:</label>
    <input type="number" name="adoptionfee" id="adoptionfee" required>
    
    <label for="phone">Phone Number:</label>
    <input type="text" name="phone" id="phone" pattern="\d{10}" title="Please enter a valid 10-digit phone number" required>
    
    <button type="submit">LIST YOUR PET</button>
</form>
{% else %}
<script>
    window.onload = function() {
        alert("Please log in or sign up to list your pet.");
        window.location.href = "{% url 'login' %}";
    };
</script>
{% endif %}

<script>
    const breedData = {
        "Dog": ["Indian pariah dog", "Indian Spitz", "Mudhol hound", "Rajapalayam", "Beagle", "Chippiparai", "German Shepherd", "Labrador", "Pug", "Doberman", "Bakharwal dog", "Boxer", "Bulldog"],
        "Cat": ["Bombay cat", "Himalayan cat", "Siamese cat", "Maine Coon", "Persian cat", "American Bobtail", "Oriental Shorthair"],
    };

    function breedDropdown() {
        const breedDropdown = document.getElementById("breed");
        const selectedSpecies = document.getElementById("species").value;
        breedDropdown.innerHTML = "";

        if (selectedSpecies && breedData[selectedSpecies]) {
            breedDropdown.disabled = false;
            breedData[selectedSpecies].forEach(breed => {
                const option = document.createElement("option");
                option.value = breed;
                option.text = breed;
                breedDropdown.add(option);
            });
        } else {
            breedDropdown.disabled = true;
            breedDropdown.add(new Option("Please select a species", ""));
        }
    }

    function toggleGender() {
    const maleCheckbox = document.getElementById('male');
    const femaleCheckbox = document.getElementById('female');
    
    // Ensure only one gender is selected
    if (maleCheckbox.checked) {
        femaleCheckbox.checked = false;
    } else if (femaleCheckbox.checked) {
        maleCheckbox.checked = false;
    }
}

</script>
{% endblock %}
